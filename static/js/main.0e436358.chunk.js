(this.webpackJsonptraveler=this.webpackJsonptraveler||[]).push([[0],{100:function(e,t,n){e.exports=n(122)},104:function(e,t,n){},122:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(32),i=n.n(o),c=(n(104),n(92)),u=n(17),s=n(7),l=n(26),f=n(0),m=Object(l.a)((function(e,t){return{statics:{},sunRef:void 0,prismColorPrimary:new f.Color("#355cd6"),prismColorSecondary:new f.Color("#6cbca0"),prismPosition:new f.Vector3(0,8,0),cameraPosition:new f.Vector3(0,1.6,20),prismScale:new f.Vector3(1,1.8,1),ringColor:new f.Color("#d7ee9b"),fov:73.7,glRenderer:null,isMobile:/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),effectsEnabled:!0,quality:window.devicePixelRatio,actions:{setGL:function(t){e({glRenderer:t})},setEnableEffects:function(t){e({effectsEnabled:t})},setQuality:function(t){e({quality:t*window.devicePixelRatio})}}}})),d=new f.Quaternion(0,1,0,0),p=m.getState().fov,g=Object(l.a)((function(e,t){return{mutations:{rig:void 0,camera:void 0,controls:void 0,target:void 0,threshold:0,speed:0,targetSpeed:0,warping:!1,stopped:!0},actions:{startWarp:function(){return e((function(e){e.mutations.targetSpeed=100,e.mutations.warping=!0}))},stop:function(){return e((function(e){e.mutations.targetSpeed=0,e.mutations.warping=!1,e.mutations.stopped=!0}))},alignTo:function(t){return e((function(e){e.mutations.targetSpeed=5,e.mutations.target=t,e.mutations.stopped=!1}))},warpTo:function(n){t().actions.alignTo(n),setTimeout((function(){e((function(e){e.mutations.threshold=n.diameter/2/Math.tan(Math.PI*p/360)+110})),t().actions.startWarp()}),3e3)}},init:function(n,a,r){var o=t().mutations,i=t().actions;e((function(e){e.mutations.rig=n,e.mutations.camera=a,e.mutations.controls=r})),o.camera.quaternion.copy(o.rig.quaternion).multiply(d),o.camera.position.copy(o.rig.position),Object(s.c)((function(){var e=o.speed,t=o.targetSpeed,n=(o.warping,o.stopped),a=o.rig,r=o.camera,c=(o.controls,o.target),u=o.threshold;if(n)o.speed+=.05*(0-e);else if(!n){var s=(new f.Quaternion).copy(a.quaternion);a.lookAt(c.position);var l=(new f.Quaternion).copy(a.quaternion);f.Quaternion.slerp(s,l,a.quaternion,.03);var m=a.quaternion.clone().multiply(d);r.quaternion.slerp(m,.1),o.speed+=(t-e)*Math.max(e/2e3,.001),a.position.distanceTo(c.position)-c.diameter<u&&i.stop()}a.translateZ(o.speed/20),r.position.copy(a.position)}))}}})),v=m.getState().fov,b=.5/Math.tan(Math.PI*v/360),h=g.getState().mutations,w=function(){var e=Object(a.useRef)({iTime:{value:0},iResolution:{value:new f.Vector2(1,1)},seed:{value:Math.random()/5},uSpeed:{value:0}}),t=Object(s.h)().aspect,n=Object(s.i)((function(){n.current.scale.setX(t),e.current.iResolution.value=new f.Vector2(t,1)}),[t]);return Object(s.f)((function(t){var n=t.clock;e.current.uSpeed.value=h.speed,e.current.iTime.value=n.getElapsedTime()})),r.a.createElement("mesh",{ref:n,position:[0,0,b]},r.a.createElement("planeBufferGeometry",{attach:"geometry",args:[1,1]}),r.a.createElement("shaderMaterial",{attach:"material",args:[{uniforms:e.current,vertexShader:"varying vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",fragmentShader:"uniform vec3 iResolution;\nuniform float iTime;\nuniform float uSpeed;   // a value from 0 to 100\nuniform float seed;\nvarying vec2 vUv;\n\n// adapted from https://www.shadertoy.com/view/Msl3WH\n\nfloat map(float value, float min1, float max1, float min2, float max2) {\n    return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    float time = iTime * 10.0;\n\n    float s = 0.0;\n    float v = 0.0;\n\n    vec2 uv = (-iResolution.xy + 2.0 * fragCoord) / iResolution.y;\n\n    float t = time * 0.005;\n\n    vec3 col = vec3(0.0);\n\n    vec3 init = vec3(0.25 + seed, 0.25 + sin(time * 0.001) * 0.4, time * 0.005);\n\n    for (float r = 0.; r < uSpeed * 1.2; r++) {\n        vec3 p = init + s * vec3(uv, map(uSpeed, 0., 100., 0.135, 0.005));\n\n        p.z = mod(p.z, 2.0);\n\n        for (int i = 0; i < 10; i++) {\n            p = abs(p * 2.04) / dot(p, p) - 0.75;\n        }\n\n        v += length(p * p) * smoothstep(0.0, 0.5, 1.0 - s) * .002;\n\n        col += vec3( + v * 0.5, 0.1 + v * 0.5, 1.2 - s * 0.5) * v * 0.007;\n        s += .01;\n    }\n    fragColor = vec4(col, col.x+col.y+col.z/6.);\n}\n\nvoid main() {\n    mainImage(gl_FragColor, vUv * iResolution.xy);\n}\n"}],transparent:!0,side:f.DoubleSide}))},E=n(94),j=n(43),x=n(76),O=n(95),y=n(77);Object(s.e)({EffectComposer:E.a,ShaderPass:j.a,RenderPass:x.a,UnrealBloomPass:O.a});var S=function(){var e=Object(a.useRef)(),t=Object(s.h)(),n=t.scene,o=t.gl,i=t.size,c=t.camera,u=Object(a.useMemo)((function(){return new f.Vector2(i.width,i.height)}),[i]);return Object(a.useEffect)((function(){e.current.setSize(i.width,i.height)}),[i]),Object(s.f)((function(){return e.current.render()}),2),r.a.createElement("effectComposer",{ref:e,args:[o]},r.a.createElement("renderPass",{attachArray:"passes",scene:n,camera:c}),r.a.createElement("unrealBloomPass",{attachArray:"passes",args:[u,.4,1,.2]}),r.a.createElement("shaderPass",{attachArray:"passes",args:[y.a],"material-uniforms-resolution-value":[1/i.width,1/i.height]}))},R=n(96),k=function(e,t){var n=t.axis,a=void 0===n?"y":n,r=t.rate,o=void 0===r?.01:r;return Object(s.f)((function(){e.current.rotation[a]+=o})),e},C=n(62),P=n.n(C),T=n(63),M=n.n(T),_=n(64),A=n.n(_),L=n(65),V=n.n(L),W=n(66),q=n.n(W),U=n(67),z=n.n(U),B=n(68),G=n.n(B),I=n(69),Q=n.n(I),F=n(70),J=n.n(F),N=(new(n(78).a),function(){Object(s.g)(f.TextureLoader,z.a),Object(s.g)(f.TextureLoader,G.a),Object(s.g)(f.TextureLoader,Q.a),Object(s.g)(f.TextureLoader,J.a);var e=Object(a.useRef)();return r.a.createElement("pointLight",{ref:e,color:"#ffffff",intensity:1})}),D=Object(a.forwardRef)((function(e,t){var n=e.children,o=Object(R.a)(e,["children"]),i=o.diameter,c=o.isStar,u=void 0!==c&&c,l=o.texture,m=o.turnRate,d=Object(a.useRef)();k(d,{rate:m});var p=Object(s.g)(f.TextureLoader,l);return r.a.createElement("group",Object.assign({ref:t},o),u?r.a.createElement(N,null):null,r.a.createElement("mesh",{ref:d,scale:[i,i,i]},r.a.createElement("sphereBufferGeometry",{attach:"geometry",args:[1,64,32]}),r.a.createElement("meshStandardMaterial",{attach:"material",color:"#eeeeee",map:p,emissive:u?new f.Color("#ffffff"):void 0,emissiveMap:u?p:void 0,emissiveIntensity:u?1:0,roughness:.5})),n)})),H=Object(l.a)((function(){return{bodies:[{name:"sun",position:new f.Vector3(-800,200,-2e3),diameter:20,texture:M.a,isStar:!0,turnRate:2e-4},{name:"mars",position:new f.Vector3(250,500,-600),diameter:200,texture:A.a,turnRate:-5e-4},{name:"moon1",position:new f.Vector3(-650,5,-400),diameter:30,texture:V.a,turnRate:8e-4},{name:"moon2",position:new f.Vector3(100,-50,400),diameter:30,texture:q.a,turnRate:.001}]}})),X=H.getState().bodies,Z=function(){var e=Object(s.g)(f.TextureLoader,z.a);return r.a.createElement(r.a.Fragment,null,X.map((function(t){return r.a.createElement(D,Object.assign({},t,{key:t.name}),t.isStar?r.a.createElement("sprite",{scale:[.5,.5,.5]},r.a.createElement("spriteMaterial",{attach:"material",map:e,alphaMap:e,sizeAttenuation:!1})):null)})))},$=n(79),K=n.n($),Y=function(){var e=Object(s.h)(),t=e.scene,n=e.gl,r=Object(s.g)(f.TextureLoader,K.a);return Object(a.useEffect)((function(){var e=new f.WebGLCubeRenderTarget(r.image.height);e.fromEquirectangularTexture(n,r),t.background=e})),null},ee=function(){var e=Object(s.h)(),t=e.camera,n=e.gl,o=m((function(e){return e})).cameraPosition,i=Object(a.useRef)();return Object(a.useEffect)((function(){var e=n.xr.isPresenting?n.xr.getCamera(t):t;return i.current.add(e),function(){i.current.remove(e)}}),[n.xr.isPresenting,n.xr,t,i]),r.a.createElement("group",{ref:i,position:o})},te=n(9),ne=n(80),ae=n(82),re=n(81),oe=function(){var e=Object(a.useState)(),t=Object(te.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(""),i=Object(te.a)(o,2),c=i[0],u=i[1],s=Object(a.useState)(!1),l=Object(te.a)(s,2),f=l[0],d=l[1],p=m((function(e){return e.glRenderer})),g=m((function(e){return e.actions.setEnableEffects})),v=Object(a.useCallback)((function(){n.click(),g(!1)}),[n,g]);return Object(a.useEffect)((function(){if(navigator.xr&&p){var e=re.a.createButton(p);r(e),navigator.xr.isSessionSupported("immersive-vr").then((function(e){u(e?"Enter VR":"VR Unavailable")}))}}),[p]),Object(a.useEffect)((function(){d("VR Unavailable"===c)}),[c]),[v,c,f]},ie=Object(l.a)((function(e,t){return{audio:!1,toggleAudio:function(){e({audio:!t().audio})}}}));function ce(){var e=Object(ne.a)(["\n    position: ",";\n    color: #fff;\n    top: ",";\n    bottom: ",";\n    left: ",";\n    right: ",";\n    width: ",";\n    border: ",";\n    border-radius: 5px;\n    background: rgba(0, 0, 0, 0.1);\n    padding: ",";\n    text-align: center;\n    opacity: 0.8;\n    outline: none;\n    z-index: 999;\n    transition: opacity 0.3s;\n    &:hover {\n        ","\n    }\n"]);return ce=function(){return e},e}var ue=ae.a.button(ce(),(function(e){return e.position||"fixed"}),(function(e){return e.top}),(function(e){return e.bottom}),(function(e){return e.left}),(function(e){return e.right}),(function(e){return e.width}),(function(e){return e.border&&"1px solid #fff"}),(function(e){return e.padding||"6px 12px"}),(function(e){return e.disabled?null:"opacity:1"})),se=function(){var e=ie((function(e){return e.audio})),t=ie((function(e){return e.toggleAudio})),n=oe(),a=Object(te.a)(n,3),o=a[0],i=a[1],c=a[2];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,{as:"a",top:"10px",left:"10px",border:!0,href:"https://github.com/Mr-Quin/traveler",target:"/"},"Source"),r.a.createElement(ue,{bottom:"20px",left:"10px",border:!0,onClick:t},"Audio: ",e?"On":"Off"),r.a.createElement(ue,{bottom:"20px",right:"20px",width:"120px",border:!0,onClick:o,disabled:c},i))},le=new Audio(P.a),fe=function(){var e=ie((function(e){return e.audio}));return Object(a.useEffect)((function(){le.loop=!0}),[]),Object(a.useEffect)((function(){e?le.play():le.pause()}),[e]),null},me=H.getState().bodies,de=function(e){return e.actions.warpTo},pe=function(e){return e.init},ge=function(e){var t=Object(a.useRef)(),n=Object(a.useRef)(),o=Object(s.h)().camera,i=g(de),c=g(pe);return Object(a.useEffect)((function(){c(t.current,o,n.current)}),[]),Object(a.useEffect)((function(){setTimeout((function(){i(me[0]),setInterval((function(){i(me[4*Math.random()<<0])}),2e4)}),2e3)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("group",{ref:t},r.a.createElement("group",null,e.children)))},ve=n(93),be=function(e){return{cameraPosition:e.cameraPosition,effectsEnabled:e.effectsEnabled,setGL:e.actions.setGL,fov:e.fov}},he=function(){var e=m(be),t=e.cameraPosition,n=e.effectsEnabled,o=e.setGL,i=e.fov;return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{vr:!0,concurrent:!0,gl:{antialias:!0},camera:{fov:i,position:t,near:.01,far:4e4},onCreated:function(e){var t=e.gl;t.setClearColor("#07060c"),o(t)},style:{position:"fixed",height:"100%",width:"100%",top:0,left:0},shadowMap:!0},r.a.createElement(a.Suspense,{fallback:null},r.a.createElement(Z,null),n?r.a.createElement(Y,null):null,r.a.createElement(ge,null,r.a.createElement(w,null)),r.a.createElement("ambientLight",{args:["#6368e2",.15]}),r.a.createElement(fe,null)),n?r.a.createElement(S,null):null,n?null:r.a.createElement(ee,null)),r.a.createElement(ve.a,{innerStyles:null,barStyles:null,containerStyles:null,dataStyles:null}),r.a.createElement(se,null))},we=function(){return r.a.createElement(c.a,{basename:"/traveler"},r.a.createElement(u.a,null,r.a.createElement(he,null)))},Ee=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function je(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(we,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/traveler",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/traveler","/service-worker.js");Ee?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):je(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):je(t,e)}))}}()},62:function(e,t,n){e.exports=n.p+"static/media/ambient.51e1df41.ogg"},63:function(e,t,n){e.exports=n.p+"static/media/2k_sun.f8d91fb7.jpg"},64:function(e,t,n){e.exports=n.p+"static/media/2k_makemake_fictional.37998f7c.jpg"},65:function(e,t,n){e.exports=n.p+"static/media/2k_ceres_fictional.e7dce55f.jpg"},66:function(e,t,n){e.exports=n.p+"static/media/2k_haumea_fictional.11888d39.jpg"},67:function(e,t,n){e.exports=n.p+"static/media/lens_flare.5c8678b3.jpg"},68:function(e,t,n){e.exports=n.p+"static/media/lens_flare_disk.9e9a510a.jpg"},69:function(e,t,n){e.exports=n.p+"static/media/lens_flare_blur.15645033.jpg"},70:function(e,t,n){e.exports=n.p+"static/media/lens_flare_ring.2e90f194.jpg"},79:function(e,t,n){e.exports=n.p+"static/media/8k_stars_milky_way.6e6ebeca.jpg"}},[[100,1,2]]]);
//# sourceMappingURL=main.0e436358.chunk.js.map